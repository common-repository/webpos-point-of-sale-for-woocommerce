jQuery(document).ready((function(e){"use strict";function i(i,s){switch(i){case"customer_display":e(".viwebpos-receipt-preview .viwebpos-bill-customer-info span").addClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-customer-info span.viwebpos-bill-customer-"+s).removeClass("viwebpos-hidden");break;case"logo":e(".viwebpos-receipt-preview .viwebpos-bill-logo-preview img").attr("src",s),e(".viwebpos-upload-logo-wrap .viwebpos-upload-logo-preview img").attr("src",s);break;case"page_width":e(".viwebpos-receipt-preview").css("width",s+"mm");break;case"page_margin":e(".viwebpos-receipt-preview .viwebpos-receipt-inner").css("padding",s+"mm");break;case"contact_info":let i=e(".viwebpos-receipt-preview .viwebpos-bill-contact"),o={"{site_title}":i.data("title"),"{address_1}":i.data("address1"),"{address_2}":i.data("address2"),"{city}":i.data("city"),"{state}":i.data("state"),"{country}":i.data("country")},l=s;for(let e in o)l=l.replace(new RegExp(e,"g"),o[e]);let p=l.split("\n"),a="";e.each(p,(function(e,i){a+="<div>"+i+"</div>"})),i.html(a);break;case"customer_address_display":let b=e(".viwebpos-receipt-preview .viwebpos-bill-customer-address-info"),r=s,d={"{address_line_1}":b.data("address1"),"{address_line_2}":b.data("address2"),"{city}":b.data("city"),"{state}":b.data("state"),"{country}":b.data("country")};for(let e in d)r=r.replace(new RegExp(e,"g"),d[e]);let t=r.split("\n"),c="";e.each(t,(function(e,i){c+="<div>"+i+"</div>"})),b.html(c);break;case"footer_message":if("order_item"===viwebpos_receipts.type&&(s?e(".viwebpos-bill-footer").removeClass("viwebpos-hidden"):e(".viwebpos-bill-footer").addClass("viwebpos-hidden")),s){let i=s.split("\n"),o="";e.each(i,(function(e,i){o+="<div>"+i+"</div>"})),e(".viwebpos-bill-footer-message").html(o)}else e(".viwebpos-bill-footer-message").html(s);break;case"bill_title":e(".viwebpos-bill-title").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-title").removeClass("viwebpos-hidden");break;case"date_create_label":e(".viwebpos-bill-date-label").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-date-label").removeClass("viwebpos-hidden");break;case"order_id_label":e(".viwebpos-bill-id-label").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-id-label").removeClass("viwebpos-hidden");break;case"cashier_label":e(".viwebpos-bill-cashier-label").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-cashier-label").removeClass("viwebpos-hidden");break;case"customer_label":e(".viwebpos-bill-customer-label").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-customer-label").removeClass("viwebpos-hidden");break;case"customer_phone_label":e(".viwebpos-bill-customer-phone-label").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-customer-phone-label").removeClass("viwebpos-hidden");break;case"customer_address_label":e(".viwebpos-bill-customer-address-label").html(s).addClass("viwebpos-hidden"),s&&e(".viwebpos-bill-customer-address-label").removeClass("viwebpos-hidden");break;case"product_id_label":e(".viwebpos-bill-col-product-id-label").html(s);break;case"product_sku_label":e(".viwebpos-bill-col-product-sku-label").html(s);break;case"product_price_label":e(".viwebpos-bill-product-price-label, .viwebpos-bill-col-product-price-label").html(s),"order_item"===viwebpos_receipts.type&&(s?e(".viwebpos-bill-product-price-label").removeClass("viwebpos-hidden"):e(".viwebpos-bill-product-price-label").addClass("viwebpos-hidden"));break;case"product_quantity_label":e(".viwebpos-bill-product-quantity-label").html(s),e(".viwebpos-bill-col-product-quantity-label").html(s);break;case"product_subtotal_label":e(".viwebpos-bill-product-subtotal-label").html(s),e(".viwebpos-bill-col-product-subtotal-label").html(s);break;case"product_label":e(".viwebpos-bill-product-title-col-block").html(s),e(".viwebpos-bill-col-product-title-label").html(s);break;case"order_tax_label":e(".viwebpos-bill-order-tax-label").html(s);break;case"order_discount_label":e(".viwebpos-bill-order-discount-label").html(s);break;case"order_paid_label":e(".viwebpos-bill-order-paid-label").html(s);break;case"order_change_label":e(".viwebpos-bill-order-change-label").html(s);break;case"order_total_label":e(".viwebpos-bill-order-total-label").html(s)}}"undefined"!=typeof viwebpos_receipts&&viwebpos_receipts.action&&(e(document).on("viwebpos-frame-print",(function(i,s){if(!e("#viwebpos-frame-print").length)return!1;e("#viwebpos-frame-print").css("left","0"),window.frames["viwebpos-frame-print"].onload=function(){window.frames["viwebpos-frame-print"].focus(),window.frames["viwebpos-frame-print"].print(),e("#viwebpos-frame-print").css("left","100%"),s.removeClass("loading"),e(".viwebpos-save").attr("type","submit")}})),e(".vi-ui.vi-ui-main.tabular.menu .item").length&&e(".vi-ui.vi-ui-main.tabular.menu .item").vi_tab({history:!0,historyType:"hash"}),e(".vi-ui.checkbox").off().checkbox(),e(".vi-ui.dropdown").off().dropdown(),e('input[type="checkbox"]').off().on("change",(function(){if(e(this).prop("checked"))switch(e(this).parent().find('input[type="hidden"]').val(1),e(this).attr("id")){case"viwebpos-receipts-logo-checkbox":e(".viwebpos-receipt_logo-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-logo").removeClass("viwebpos-hidden"),e(".viwebpos-bill-header-wrap").removeClass("viwebpos-bill-header-max");break;case"viwebpos-receipts-date_create-checkbox":e(".viwebpos-receipts-date_create-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-date-wrap").removeClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-top").addClass("viwebpos-header-order");break;case"viwebpos-receipts-order_id-checkbox":e(".viwebpos-receipts-order_id-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-id-wrap").removeClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-top").addClass("viwebpos-header-order");break;case"viwebpos-receipts-cashier-checkbox":e(".viwebpos-receipts-cashier-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-cashier-wrap").removeClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-top").addClass("viwebpos-header-order");break;case"viwebpos-receipts-customer-checkbox":e(".viwebpos-receipts-customer-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-customer-wrap").removeClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-top").addClass("viwebpos-header-style");break;case"viwebpos-receipts-customer_phone-checkbox":e(".viwebpos-receipts-customer_phone-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-customer-phone-wrap").removeClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-top").addClass("viwebpos-header-style");break;case"viwebpos-receipts-customer_address-checkbox":e(".viwebpos-receipts-customer_address-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-customer-address-wrap").removeClass("viwebpos-hidden"),e(".viwebpos-receipt-preview .viwebpos-bill-top").addClass("viwebpos-header-style");break;case"viwebpos-receipts-product_id-checkbox":e(".viwebpos-receipts-product_id-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-id-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-id").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-id-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-id").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-product_sku-checkbox":e(".viwebpos-receipts-product_sku-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-sku-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-sku").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-sku-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-sku").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-product_price-checkbox":e(".viwebpos-receipts-product_price-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-price-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-price").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-price-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-price").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-product_quantity-checkbox":e(".viwebpos-receipts-product_quantity-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-quantity-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-quantity").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-quantity-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-quantity").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-product_subtotal-checkbox":e(".viwebpos-receipts-product_subtotal-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-subtotal-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-product-subtotal").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-subtotal-label").removeClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-subtotal").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-order_total-checkbox":e(".viwebpos-receipts-order_total-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-total-wrap").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-order_tax-checkbox":e(".viwebpos-receipts-order_tax-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-tax-wrap").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-order_discount-checkbox":e(".viwebpos-receipts-order_discount-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-discount-wrap").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-order_paid-checkbox":e(".viwebpos-receipts-order_paid-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-paid-wrap").removeClass("viwebpos-hidden");break;case"viwebpos-receipts-order_change-checkbox":e(".viwebpos-receipts-order_change-enable").removeClass("viwebpos-hidden"),e(".viwebpos-bill-order-change-wrap").removeClass("viwebpos-hidden")}else switch(e(this).parent().find('input[type="hidden"]').val(0),e(this).attr("id")){case"viwebpos-receipts-logo-checkbox":e(".viwebpos-receipt_logo-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-logo").addClass("viwebpos-hidden"),e(".viwebpos-bill-header-wrap").addClass("viwebpos-bill-header-max");break;case"viwebpos-receipts-date_create-checkbox":e(".viwebpos-receipts-date_create-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-date-wrap").addClass("viwebpos-hidden"),e("#viwebpos-receipts-order_id-checkbox").prop("checked")||e("#viwebpos-receipts-cashier-checkbox").prop("checked")||e(".viwebpos-receipt-preview .viwebpos-bill-top").removeClass("viwebpos-header-order");break;case"viwebpos-receipts-order_id-checkbox":e(".viwebpos-receipts-order_id-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-id-wrap").addClass("viwebpos-hidden"),e("#viwebpos-receipts-date_create-checkbox").prop("checked")||e("#viwebpos-receipts-cashier-checkbox").prop("checked")||e(".viwebpos-receipt-preview .viwebpos-bill-top").removeClass("viwebpos-header-order");break;case"viwebpos-receipts-cashier-checkbox":e(".viwebpos-receipts-cashier-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-cashier-wrap").addClass("viwebpos-hidden"),e("#viwebpos-receipts-order_id-checkbox").prop("checked")||e("#viwebpos-receipts-date_create-checkbox").prop("checked")||e(".viwebpos-receipt-preview .viwebpos-bill-top").removeClass("viwebpos-header-order");break;case"viwebpos-receipts-customer-checkbox":e(".viwebpos-receipts-customer-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-customer-wrap").addClass("viwebpos-hidden"),e("#viwebpos-receipts-customer_phone-checkbox").prop("checked")||e("#viwebpos-receipts-customer_address-checkbox").prop("checked")||e(".viwebpos-receipt-preview .viwebpos-bill-top").removeClass("viwebpos-header-style");break;case"viwebpos-receipts-customer_phone-checkbox":e(".viwebpos-receipts-customer_phone-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-customer-phone-wrap").addClass("viwebpos-hidden"),e("#viwebpos-receipts-customer-checkbox").prop("checked")||e("#viwebpos-receipts-customer_address-checkbox").prop("checked")||e(".viwebpos-receipt-preview .viwebpos-bill-top").removeClass("viwebpos-header-style");break;case"viwebpos-receipts-customer_address-checkbox":e(".viwebpos-receipts-customer_address-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-customer-address-wrap").addClass("viwebpos-hidden"),e("#viwebpos-receipts-customer_phone-checkbox").prop("checked")||e("#viwebpos-receipts-customer-checkbox").prop("checked")||e(".viwebpos-receipt-preview .viwebpos-bill-top").removeClass("viwebpos-header-style");break;case"viwebpos-receipts-product_id-checkbox":e(".viwebpos-receipts-product_id-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-id-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-id").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-id-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-id").addClass("viwebpos-hidden");break;case"viwebpos-receipts-product_sku-checkbox":e(".viwebpos-receipts-product_sku-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-sku-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-sku").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-sku-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-sku").addClass("viwebpos-hidden");break;case"viwebpos-receipts-product_price-checkbox":e(".viwebpos-receipts-product_price-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-price-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-price").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-price-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-price").addClass("viwebpos-hidden");break;case"viwebpos-receipts-product_quantity-checkbox":e(".viwebpos-receipts-product_quantity-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-quantity-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-quantity").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-quantity-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-quantity").addClass("viwebpos-hidden");break;case"viwebpos-receipts-product_subtotal-checkbox":e(".viwebpos-receipts-product_subtotal-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-subtotal-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-product-subtotal").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-subtotal-label").addClass("viwebpos-hidden"),e(".viwebpos-bill-col-product-subtotal").addClass("viwebpos-hidden");break;case"viwebpos-receipts-order_total-checkbox":e(".viwebpos-receipts-order_total-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-total-wrap").addClass("viwebpos-hidden");break;case"viwebpos-receipts-order_tax-checkbox":e(".viwebpos-receipts-order_tax-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-tax-wrap").addClass("viwebpos-hidden");break;case"viwebpos-receipts-order_discount-checkbox":e(".viwebpos-receipts-order_discount-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-discount-wrap").addClass("viwebpos-hidden");break;case"viwebpos-receipts-order_paid-checkbox":e(".viwebpos-receipts-order_paid-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-paid-wrap").addClass("viwebpos-hidden");break;case"viwebpos-receipts-order_change-checkbox":e(".viwebpos-receipts-order_change-enable").addClass("viwebpos-hidden"),e(".viwebpos-bill-order-change-wrap").addClass("viwebpos-hidden")}})),["edit"].includes(viwebpos_receipts.action)&&setTimeout((function(){e(document).trigger("viwebpos_receipt_render_html")}),100),e(document).on("viwebpos_receipt_render_html",(function(){viwebpos_receipts.type;{e(document).on("click",".viwebpos-upload-logo-remove",(function(){let s=e(this).closest(".viwebpos-upload-logo-wrap"),o=s.find(".viwebpos-upload-logo-preview img").data("src_placeholder");s.find(".receipt_logo_id").val(""),s.find(".viwebpos-upload-logo-preview img").attr("src",o),i("logo",o),e(this).addClass("viwebpos-hidden")})),e(document).on("click",".viwebpos-upload-logo-add-new",(function(o){o.preventDefault();let l=e(".viwebpos-upload-img-editing");if(l.removeClass("viwebpos-upload-img-editing"),e(this).closest(".viwebpos-upload-logo-wrap").addClass("viwebpos-upload-img-editing"),s)return s.open(),!1;(s=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!0})).on("select",(function(){let o=s.state().get("selection").first().toJSON();l.find(".receipt_logo_id").val(o.id),e(".viwebpos-receipt_logo-enable .receipt_logo_id").val(o.id),l.find(".viwebpos-upload-logo-preview img").attr("src",o.url),l.find(".viwebpos-upload-logo-remove").removeClass("viwebpos-hidden"),i("logo",o.url),l.removeClass("viwebpos-upload-img-editing")})),s.open()})),e(".viwebpos-bill-header-wrap").addClass("viwebpos-bill-header-"+e("#viwebpos-receipts-logo_pos").val()),parseInt(e("#viwebpos-receipts-logo").val())||(e(".viwebpos-bill-logo").addClass("viwebpos-hidden"),e(".viwebpos-bill-header-wrap").addClass("viwebpos-bill-header-max")),e(".viwebpos-bill-logo-preview").html(`<img src="${e(".viwebpos-upload-logo-preview img").attr("src")}" data-src_placeholder="${e(".viwebpos-upload-logo-preview img").data("src_placeholder")}">`);let o="",l=e("[name=contact_info]").val(),p={"{site_title}":viwebpos_receipts.site_title,"{address_1}":viwebpos_receipts.primary_address,"{address_2}":viwebpos_receipts.secondary_address,"{city}":viwebpos_receipts.city,"{state}":viwebpos_receipts.state,"{country}":viwebpos_receipts.country};e.each(p,(function(e,i){l=l.replace(new RegExp(e,"g"),i)})),l=l.split("\n"),e.each(l,(function(e,i){o+=`<div>${i}</div>`})),e(".viwebpos-bill-contact").data({title:viwebpos_receipts.site_title,address1:viwebpos_receipts.primary_address,address2:viwebpos_receipts.secondary_address,city:viwebpos_receipts.city,state:viwebpos_receipts.state,country:viwebpos_receipts.country}).html(o);let a={date_create:".viwebpos-bill-order-date-wrap",order_id:".viwebpos-bill-order-id-wrap",cashier:".viwebpos-bill-cashier-wrap",customer:".viwebpos-bill-customer-wrap",customer_phone:".viwebpos-bill-customer-phone-wrap",customer_address:".viwebpos-bill-customer-address-wrap",product_id:".viwebpos-bill-product-id, .viwebpos-bill-col-product-id-label, .viwebpos-bill-col-product-id",product_sku:".viwebpos-bill-product-sku, .viwebpos-bill-col-product-sku-label, .viwebpos-bill-col-product-sku",product_price:".viwebpos-bill-product-price, .viwebpos-bill-col-product-price-label, .viwebpos-bill-col-product-price",product_quantity:".viwebpos-bill-product-quantity .viwebpos-bill-col-product-quantity-label, .viwebpos-bill-col-product-quantity",product_subtotal:".viwebpos-bill-product-subtotal-label,.viwebpos-bill-col-product-subtotal-label, .viwebpos-bill-product-subtotal, .viwebpos-bill-col-product-subtotal",order_tax:".viwebpos-bill-order-tax-wrap",order_discount:".viwebpos-bill-order-discount-wrap",order_paid:".viwebpos-bill-order-paid-wrap",order_change:".viwebpos-bill-order-change-wrap",order_total:".viwebpos-bill-order-total-wrap"},b={date_create_label:".viwebpos-bill-date-label",order_id_label:".viwebpos-bill-id-label",cashier_label:".viwebpos-bill-cashier-label",customer_label:".viwebpos-bill-customer-label",customer_phone_label:".viwebpos-bill-customer-phone-label",customer_address_label:".viwebpos-bill-customer-address-label"};e.each(a,(function(i,s){parseInt(e(`[name=${i}]`).val())||e(s).addClass("viwebpos-hidden")})),e.each(b,(function(i,s){e(`[name=${i}]`).val()&&e(s).removeClass("viwebpos-hidden").html(e(`[name=${i}]`).val())})),e("[name=bill_title]").val()&&e(".viwebpos-bill-title").removeClass("viwebpos-hidden").html(e("[name=bill_title]").val()),e(".viwebpos-bill-customer-info .viwebpos-bill-customer-"+e("[name=customer_display]").val()).removeClass("viwebpos-hidden");let r="",d=e("[name=customer_address_display]").val(),t={"{address_line_1}":e(".viwebpos-bill-customer-address-info").data("address1"),"{address_line_2}":e(".viwebpos-bill-customer-address-info").data("address2"),"{city}":e(".viwebpos-bill-customer-address-info").data("city"),"{state}":e(".viwebpos-bill-customer-address-info").data("state"),"{country}":e(".viwebpos-bill-customer-address-info").data("country")};if(e.each(t,(function(e,i){d=d.replace(new RegExp(e,"g"),i)})),d=d.split("\n"),e.each(d,(function(e,i){r+=`<div>${i}</div>`})),e(".viwebpos-bill-customer-address-info").html(r),parseFloat(e("[name=page_width]").val()||0)<=80&&e(".viwebpos-bill-product-wrap, .viwebpos-bill-col-product-wrap").addClass("viwebpos-bill-product-block"),e(".viwebpos-bill-product-title-col-block, .viwebpos-bill-col-product-title-label").html(e("[name=product_label]").val()),e(".viwebpos-bill-product-subtotal-label, .viwebpos-bill-col-product-subtotal-label").html(e("[name=product_subtotal_label]").val()),e(".viwebpos-bill-col-product-id-label").html(e("[name=product_id_label]").val()),e(".viwebpos-bill-col-product-price-label").html(e("[name=product_price_label]").val()),e(".viwebpos-bill-col-product-quantity-label").html(e("[name=product_quantity_label]").val()),e(".viwebpos-bill-product-note-label").html(e("[name=product_note_label]").val()),e(".viwebpos-bill-col-product-sku-label").html(e("[name=product_sku_label]").val()),parseInt(e("[name=product_character]").val())){let i=parseInt(e("[name=product_character]").val());e(".viwebpos-bill-product-title-inline").each((function(s,o){let l=e(o).data("title");l.length>i&&e(o).html(l.substring(0,i)+"...")})),e(".viwebpos-bill-col-product-title").each((function(s,o){let l=e(o).data("title");if(l.length>i){let s=e(o).find(".viwebpos-bill-product-note-wrap").clone();e(o).html(l.substring(0,i)+"..."),e(o).append(s)}}))}if(e(".viwebpos-bill-order-note-label").html(e("[name=order_note_label]").val()),e(".viwebpos-bill-order-tax-label").html(e("[name=order_tax_label]").val()),e(".viwebpos-bill-order-ship-label").html(e("[name=order_ship_label]").val()),e(".viwebpos-bill-order-discount-label").html(e("[name=order_discount_label]").val()),e(".viwebpos-bill-order-pos-discount-label").html(e("[name=order_pos_discount_label]").val()),e(".viwebpos-bill-order-paid-label").html(e("[name=order_paid_label]").val()),e(".viwebpos-bill-order-change-label").html(e("[name=order_change_label]").val()),e(".viwebpos-bill-order-total-label").html(e("[name=order_total_label]").val()),e("[name=footer_message]").val()){let i="",s=e("[name=footer_message]").val();s=s.split("\n"),e.each(s,(function(e,s){i+=`<div>${s}</div>`})),e(".viwebpos-bill-footer-message").html(i)}}var s})),e(document).on("change",".viwebpos-receipt-settings-wrap select",(function(){i(e(this).attr("name"),e(this).val())})),e(document).on("change keyup",'.viwebpos-receipt-settings-wrap textarea, .viwebpos-receipt-settings-wrap input[type="number"], .viwebpos-receipt-settings-wrap input[type="text"]',(function(){let s=e(this).attr("name"),o=e(this).val();if("page_width"===s)e(".viwebpos-bill-top").removeClass("viwebpos-header-block"),e(".viwebpos-bill-header-wrap").removeClass("viwebpos-bill-header-block");i(s,o)})),e(document).on("click",".viwebpos-print-preview:not(.loading)",(function(i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();let s=e(this);new Promise((function(i){s.addClass("loading"),e(".viwebpos-save").attr("type","button"),e("#viwebpos-frame-print").remove(),e("body").append('<iframe id="viwebpos-frame-print" name="viwebpos-frame-print"></iframe>');let o=window.frames["viwebpos-frame-print"],l=e("<div></div>");l.append('<meta charset="utf-8">'),l.append(e("head title").clone()),l.append(e("#viwebpos-admin-settings-css").clone()),l.append(e("#viwebpos-receipt-css").clone()),l.append(e("#viwebpos-receipt-inline-css").clone()),o.document.write("<!DOCTYPE html><html>"),o.document.write("<head>"+l.html()+"</head>"),o.document.write("<body>"+e(".viwebpos-receipt-preview-wrap").html()+"</body>"),o.document.write("</html>"),o.document.close(),i(o)})).then((function(){e(document).trigger("viwebpos-frame-print",[s])}))})))}));